<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamMagic Control</title>
    <link rel="stylesheet" href="/static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <header>
            <div class="logo">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2zm0 18a8 8 0 1 1 8-8 8 8 0 0 1-8 8z"></path>
                    <path d="M15 9l-6 6"></path>
                    <path d="M9 9l6 6"></path>
                </svg>
                <span>StreamMagic</span>
            </div>
            <div class="header-right">
                <div id="header-actions" class="header-actions"></div>
                <div id="status-indicator" class="status offline">Offline</div>
            </div>
        </header>

        <main>
            <section class="dashboard">
                <div class="card now-playing">
                    <h2>Now Playing</h2>
                    <div id="now-playing-content" class="now-playing-grid">
                        <div class="cover-art-container" style="width:32px; height:32px; flex-shrink:0;">
                            <img id="np-art" src="" alt="Cover Art"
                                style="width:32px; height:32px; object-fit:cover; display:none;"
                                onerror="this.style.display='none'">
                            <div id="np-placeholder" class="art-placeholder" style="font-size:1.2rem;">üéµ</div>
                        </div>
                        <div class="track-info">
                            <h3 id="np-title">Not Playing</h3>
                            <p id="np-artist" class="artist"></p>
                            <p id="np-album" class="album"></p>
                            <div class="meta-badges" id="np-badges">
                                <!-- e.g. "96kHz", "MQA" -->
                            </div>
                        </div>
                    </div>
                    <div class="playback-controls">
                        <button class="btn-icon" onclick="controlPlayback('previous')">‚èÆ</button>
                        <button class="btn-icon large" onclick="controlPlayback('play_pause')">‚èØ</button>
                        <button class="btn-icon" onclick="controlPlayback('next')">‚è≠</button>
                    </div>
                    <div class="volume-controls-integrated">
                        <div class="volume-row">
                            <button class="btn-icon small" onclick="toggleMute()" title="Mute/Unmute">üîá</button>
                            <input type="range" id="volume-slider" min="0" max="100" value="0"
                                onchange="setVolume(this.value)">
                            <span id="volume-display">--%</span>
                        </div>
                    </div>
                </div>

                <div id="dlna-browser" class="card">
                    <h2>Media Servers (DLNA)</h2>
                    <div class="browser-header">
                        <button class="btn-secondary small" onclick="scanDlnaServers()">üîÑ Scan Servers</button>
                        <div class="search-box">
                            <input type="text" id="dlna-search-input" placeholder="Search tracks..."
                                onkeyup="if(event.key==='Enter') searchDlna()">
                            <button class="btn-icon small" onclick="searchDlna()" title="Search">üîç</button>
                            <button id="btn-clear-search" class="btn-icon small hidden" onclick="clearSearch()"
                                title="Clear Search">‚úñÔ∏è</button>
                        </div>
                        <span id="browser-path" style="margin-left:10px; color:var(--text-secondary)">üìÅ /</span>
                    </div>
                    <div id="dlna-content" class="dlna-list">
                        <p style="color:var(--text-muted); padding:10px;">Click 'Scan Servers' to find DLNA media
                            servers.</p>
                    </div>
                </div>
            </section>


        </main>
    </div>

    <!-- Tool Modal -->
    <div id="tool-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Tool Name</h3>
                <button class="close-btn" onclick="closeModal()">√ó</button>
            </div>
            <div class="modal-body">
                <form id="tool-form" onsubmit="handleToolSubmit(event)">
                    <div id="form-fields"></div>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal()">Cancel</button>
                        <button type="submit" class="btn-primary">Execute</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>